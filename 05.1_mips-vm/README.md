# Assignment 3: Assembly - MIPS Assembler
**Converting MIPS Assembly to Machine Code**

## 🎯 **Purpose**

Assignment 3 implements a MIPS assembler that converts human-readable MIPS assembly code into binary machine code. This is a crucial component in the compiler pipeline.

## 📁 **Files**

### **Input Files**
- **`asm.cc`** - Main assembler implementation
- **`scanner.cc`** - Lexical analysis for assembly code
- **`scanner.h`** - Scanner header file
- **`Makefile`** - Build configuration
- **Input Format**: MIPS assembly source code (.asm files)

### **Output Files**
- **`asm`** - Compiled assembler executable
- **Standard Output**: MIPS machine code (.mips files)
- **Standard Error**: Error messages and debug information

## 🔧 **Input Format**

### **MIPS Assembly Source Code**
```mips
; MIPS assembly program
lis $8
.word 11
lis $9
.word 13
add $3, $8, $9
jr $31
```

### **Assembly Instructions Supported**
- **Arithmetic**: `add`, `sub`, `mult`, `div`, `mfhi`, `mflo`
- **Memory**: `lw`, `sw`, `lis`
- **Control Flow**: `beq`, `bne`, `jr`, `jalr`
- **Comparison**: `slt`, `sltu`
- **Directives**: `.word`, labels

## 🔧 **Output Format**

### **MIPS Machine Code**
Binary representation of MIPS instructions in 32-bit words.

## 🚀 **Usage**

### **Basic Usage**
```bash
# Compile the assembler
make

# Assemble MIPS code
./asm < input.asm > output.mips

# Run the assembled program
mips.twoints output.mips
```

### **Pipeline Position**
```
WLP4 Source → [Scanner] → [Parser] → [Type Checker] → [Code Generator] → MIPS Assembly → [Assembler] → MIPS Machine Code
                                                                                                    ↑
                                                                                              Assignment 3
```

## 🎯 **Key Components**

### **Scanner (scanner.cc)**
- **Tokenizes** MIPS assembly source code
- **Recognizes** instructions, registers, numbers, labels
- **Handles** comments and whitespace

### **Assembler (asm.cc)**
- **Parses** tokenized assembly code
- **Builds** symbol table for labels
- **Generates** machine code for each instruction
- **Handles** label resolution

### **Instruction Encoding**
- **R-type instructions**: `add $3, $8, $9`
- **I-type instructions**: `lw $3, 0($29)`
- **J-type instructions**: `jr $31`
- **Special cases**: `lis`, `.word`

## 📊 **Assignment 3 in Pipeline**

| Stage | Input | Output | Purpose |
|-------|-------|--------|---------|
| **Assignment 3** | MIPS Assembly | MIPS Machine Code | Assembly to machine code conversion |

## 🎯 **Learning Objectives**

1. **Understand MIPS instruction encoding**
2. **Implement lexical analysis for assembly**
3. **Build symbol tables for labels**
4. **Generate machine code from assembly**

## 🔧 **Tools Used**

- **`make`** - Build system
- **`g++`** - C++ compiler
- **`mips.twoints`** - MIPS emulator for testing

## 🎉 **Example**

### **Input (MIPS Assembly)**
```mips
lis $8
.word 11
lis $9
.word 13
add $3, $8, $9
jr $31
```

### **Output (MIPS Machine Code)**
```
00000000 01000011 00001000 00100000  ; add $3, $8, $9
00000011 11100000 00000000 00001000  ; jr $31
```

## 🔗 **Pipeline Connection**

Assignment 3 provides the assembler that converts the MIPS assembly code generated by the WLP4 compiler (Assignments 7-9) into executable machine code.

**Assignment 3 implements the assembler that converts MIPS assembly to machine code in our compiler pipeline!**